# P2P局域网聊天工具

一个基于Python的局域网P2P聊天应用，具有美观的深色主题界面。

## 功能特性

- ✅ **自动发现**: 自动发现局域网内的其他用户
- ✅ **实时聊天**: 支持实时消息发送和接收
- ✅ **美观界面**: 深色主题，现代化UI设计
- ✅ **用户状态**: 显示在线用户列表和连接状态
- ✅ **时间戳**: 消息显示发送时间
- ✅ **多线程**: 支持同时收发消息

## 系统要求

- Python 3.7+
- tkinter (通常随Python安装)
- 局域网环境

## 快速开始

### 1. 安装依赖

```bash
# tkinter通常随Python安装，如果没有：
# Ubuntu/Debian:
sudo apt-get install python3-tk

# CentOS/RHEL:
sudo yum install python3-tkinter

# macOS (tkinter已包含)
# Windows (tkinter已包含)
```

### 2. 启动应用

```bash
python3 start_chat.py
```

### 3. 使用方法

1. 在多台设备上启动应用
2. 等待自动发现局域网内的其他用户
3. 在左侧用户列表查看在线用户
4. 在底部输入框输入消息
5. 按回车或点击"发送"按钮发送消息

## 技术架构

### 核心组件

1. **PeerDiscovery**: 负责用户发现和网络广播
   - UDP广播发现协议
   - 定期发送心跳包
   - 自动维护用户列表

2. **ChatServer**: 聊天服务器
   - TCP连接管理
   - 消息广播
   - 多客户端支持

3. **ChatClient**: 聊天客户端
   - 连接远程用户
   - 消息发送接收
   - 自动重连

4. **P2PChatApp**: 主界面应用
   - tkinter GUI界面
   - 深色主题样式
   - 事件处理

### 网络协议

- **发现端口**: 5001 (UDP广播)
- **聊天端口**: 5000 (TCP)
- **消息格式**: JSON

## 文件说明

- `p2p_chat.py`: 主要实现代码
- `start_chat.py`: 启动脚本
- `requirements.txt`: 依赖列表
- `CHAT_README.md`: 使用说明

## 使用技巧

1. **防火墙设置**: 确保Python程序被允许通过防火墙
2. **网络环境**: 确保所有设备在同一局域网内
3. **端口冲突**: 如果5000端口被占用，程序会自动选择其他端口

## 故障排除

### 无法发现其他用户

- 检查防火墙设置
- 确认在同一局域网
- 检查网络连接

### 无法发送消息

- 确认目标用户在线
- 检查端口是否被占用
- 重启应用程序

### 界面问题

- 确认tkinter正确安装
- 检查Python版本兼容性

## 安全说明

此工具仅用于局域网环境，不包含加密功能。请勿在不可信的网络环境中使用。

## 开发说明

如需修改或扩展功能：

1. **添加新功能**: 修改相应的类方法
2. **修改界面**: 调整`setup_ui`相关方法
3. **网络协议**: 修改消息格式和端口配置

## 许可证

此项目仅供学习和研究使用。
